{"version":3,"sources":["containers/Purchase/components/PurchaseForm/index.js","components/Tip/index.js","containers/Purchase/index.js","components/Header/index.js"],"names":["PurchaseForm","handleDecrease","quantity","props","onSetQuantity","handleIncrease","handleChange","e","target","value","Number","parseInt","handleClick","onSubmit","this","phone","totalPrice","className","onClick","type","onChange","Component","Tip","message","onClose","Purchase","handleBack","history","goBack","handleCloseTip","purchaseActions","closeTip","handleSubmit","productId","match","params","id","submitOrder","handleSetQuantity","setOrderQuantity","product","showTip","Header","title","onBack","detailActions","loadProductDetail","connect","state","getProduct","getQuantity","getTipStatus","getUsername","getTotalPrice","dispatch","bindActionCreators","grey","backgroundColor","style"],"mappings":"6NAyFeA,G,mNAzBbC,eAAiB,WAAO,IACdC,EAAa,EAAKC,MAAlBD,SACJA,EAAW,GACb,EAAKC,MAAMC,cAAcF,EAAW,I,EAIxCG,eAAiB,WAAO,IACdH,EAAa,EAAKC,MAAlBD,SACR,EAAKC,MAAMC,cAAcF,EAAW,I,EAGtCI,aAAe,SAACC,GACd,IAAML,EAAWK,EAAEC,OAAOC,MAC1B,EAAKN,MAAMC,cAAcM,OAAOC,SAAST,K,EAG3CU,YAAc,WACS,EAAKT,MAAlBD,SACO,GACb,EAAKC,MAAMU,Y,uDAhFL,IAAD,EAKHC,KAAKX,MAHPD,EAFK,EAELA,SACAa,EAHK,EAGLA,MACAC,EAJK,EAILA,WAEF,OACE,sBAAKC,UAAU,eAAf,UACE,sBAAKA,UAAU,wBAAf,UACE,sBAAKA,UAAU,oBAAf,UACE,qBAAKA,UAAU,yBAAf,0BACA,sBAAKA,UAAU,uBAAf,UACE,sBACEA,UAAU,6BACVC,QAASJ,KAAKb,eAFhB,eAMA,uBACEgB,UAAU,yBACVE,KAAK,SACLC,SAAUN,KAAKR,aACfG,MAAOP,IAET,sBACEe,UAAU,6BACVC,QAASJ,KAAKT,eAFhB,qBAQJ,sBAAKY,UAAU,oBAAf,UACE,qBAAKA,UAAU,yBAAf,0BACA,qBAAKA,UAAU,yBAAf,SACE,sBAAMA,UAAU,2BAAhB,uBAAgDD,UAGpD,sBAAKC,UAAU,oBAAf,UACE,qBAAKA,UAAU,yBAAf,sCACA,qBAAKA,UAAU,yBAAf,SAAyCF,UAG7C,qBAAIE,UAAU,uBAAd,UACE,qBAAIA,UAAU,2BAAd,UACE,mBAAGA,UAAU,uBACb,sBAAMA,UAAU,qBAAhB,+CAEF,qBAAIA,UAAU,2BAAd,UACE,mBAAGA,UAAU,uBACb,sBAAMA,UAAU,qBAAhB,kDAGJ,mBAAGA,UAAU,uBAAuBC,QAASJ,KAAKF,YAAlD,6C,GAtDmBS,cCkBZC,G,8KAjBH,IAAD,EACsBR,KAAKX,MAA1BoB,EADD,EACCA,QAASC,EADV,EACUA,QACjB,OACE,qBAAKP,UAAU,MAAf,SACE,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,eAAf,SAA+BM,IAC/B,qBAAKN,UAAU,YAAf,SACE,mBAAGA,UAAU,WAAWC,QAASM,EAAjC,qC,GARMH,c,uCCaZI,E,4MAkCJC,WAAa,WACX,EAAKvB,MAAMwB,QAAQC,U,EAGrBC,eAAiB,WACf,EAAK1B,MAAM2B,gBAAgBC,Y,EAG7BC,aAAe,WACb,IAAMC,EAAY,EAAK9B,MAAM+B,MAAMC,OAAOC,GAC1C,EAAKjC,MAAM2B,gBAAgBO,YAAYJ,I,EAGzCK,kBAAoB,SAACpC,GACnB,EAAKC,MAAM2B,gBAAgBS,iBAAiBrC,I,uDA/CpC,IAAD,EACmDY,KAAKX,MAAvDqC,EADD,EACCA,QAASzB,EADV,EACUA,MAAOb,EADjB,EACiBA,SAAUuC,EAD3B,EAC2BA,QAASzB,EADpC,EACoCA,WAC3C,OACE,gCACE,cAAC0B,EAAA,EAAD,CAAQC,MAAM,eAAKC,OAAQ9B,KAAKY,aAC/Bc,EACC,cAAC,EAAD,CACEzB,MAAOA,EACPb,SAAUA,EACVc,WAAYA,EACZH,SAAUC,KAAKkB,aACf5B,cAAeU,KAAKwB,oBAEpB,KACHG,EACC,cAAC,EAAD,CAAKlB,QAAQ,4BAAQC,QAASV,KAAKe,iBACjC,U,0CAOR,IADoBf,KAAKX,MAAjBqC,QACM,CACZ,IAAMP,EAAYnB,KAAKX,MAAM+B,MAAMC,OAAOC,GAC1CtB,KAAKX,MAAM0C,cAAcC,kBAAkBb,M,6CAK7CnB,KAAKX,MAAM2B,gBAAgBS,iBAAiB,O,GA/BzBlB,aAsER0B,uBAlBS,SAACC,EAAO7C,GAC9B,IAAM8B,EAAY9B,EAAM+B,MAAMC,OAAOC,GACrC,MAAO,CACLI,QAASS,YAAWD,EAAOf,GAC3B/B,SAAUgD,YAAYF,GACtBP,QAASU,YAAaH,GACtBjC,MAAOqC,YAAYJ,GACnBhC,WAAYqC,YAAcL,EAAOf,OAIX,SAACqB,GACzB,MAAO,CACLxB,gBAAiByB,YAAmBzB,IAAiBwB,GACrDT,cAAeU,YAAmBV,IAAeS,MAItCP,CAA4CtB,I,kFCnFrDiB,G,6KACQ,IAAD,EACyB5B,KAAKX,MAA5BqD,EADF,EACEA,KAAMb,EADR,EACQA,MAAOC,EADf,EACeA,OACda,EAAkBD,EAAO,UAAY,OAC3C,OACI,yBAAQvC,UAAU,SAASyC,MAAO,CAAC,gBAAkBD,GAArD,UACI,qBAAKxC,UAAU,eAAeC,QAAS0B,EAAvC,0BAGA,qBAAK3B,UAAU,gBAAf,SACK0B,W,GAVAtB,cAiBNqB,O","file":"static/js/8.fd2189c8.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass PurchaseForm extends Component {\r\n  render() {\r\n    const {\r\n      quantity,\r\n      phone,\r\n      totalPrice\r\n    } = this.props;\r\n    return (\r\n      <div className=\"purchaseForm\">\r\n        <div className=\"purchaseForm__wrapper\">\r\n          <div className=\"purchaseForm__row\">\r\n            <div className=\"purchaseForm__rowLabel\">数量</div>\r\n            <div className=\"purchaseForm__rowBtn\">\r\n              <span\r\n                className=\"purchaseForm__counter--dec\"\r\n                onClick={this.handleDecrease}\r\n              >\r\n                -\r\n              </span>\r\n              <input\r\n                className=\"purchaseForm__quantity\"\r\n                type=\"number\"\r\n                onChange={this.handleChange}\r\n                value={quantity}\r\n              />\r\n              <span\r\n                className=\"purchaseForm__counter--inc\"\r\n                onClick={this.handleIncrease}\r\n              >\r\n                +\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\"purchaseForm__row\">\r\n            <div className=\"purchaseForm__rowLabel\">小计</div>\r\n            <div className=\"purchaseForm__rowValue\">\r\n              <span className=\"purchaseForm__totalPrice\">{`¥${totalPrice}`}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"purchaseForm__row\">\r\n            <div className=\"purchaseForm__rowLabel\">手机号码</div>\r\n            <div className=\"purchaseForm__rowValue\">{phone}</div>\r\n          </div>\r\n        </div>\r\n        <ul className=\"purchaseForm__remark\">\r\n          <li className=\"purchaseForm__remarkItem\">\r\n            <i className=\"purchaseForm__sign\"></i>\r\n            <span className=\"purchaseForm__desc\">支持随时退</span>\r\n          </li>\r\n          <li className=\"purchaseForm__remarkItem\">\r\n            <i className=\"purchaseForm__sign\"></i>\r\n            <span className=\"purchaseForm__desc\">支持过期退</span>\r\n          </li>\r\n        </ul>\r\n        <a className=\"purchaseForm__submit\" onClick={this.handleClick}>\r\n          提交订单\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleDecrease = () => {\r\n    const { quantity } = this.props;\r\n    if (quantity > 0) {\r\n      this.props.onSetQuantity(quantity - 1);\r\n    }\r\n  };\r\n\r\n  handleIncrease = () => {\r\n    const { quantity } = this.props;\r\n    this.props.onSetQuantity(quantity + 1);\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const quantity = e.target.value;\r\n    this.props.onSetQuantity(Number.parseInt(quantity));\r\n  };\r\n\r\n  handleClick = () => {\r\n    const { quantity } = this.props;\r\n    if (quantity > 0) {\r\n      this.props.onSubmit();\r\n    }\r\n  };\r\n}\r\n\r\nexport default PurchaseForm;\r\n","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass Tip extends Component {\r\n  render() {\r\n    const { message, onClose } = this.props;\r\n    return (\r\n      <div className=\"tip\">\r\n        <div className=\"tip__alert\">\r\n          <div className=\"tip__content\">{message}</div>\r\n          <div className=\"tip__btns\">\r\n            <a className=\"tip__btn\" onClick={onClose}>\r\n              确定\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tip;\r\n","import React, { Component } from \"react\";\r\nimport Header from \"../../components/Header\";\r\nimport PurchaseForm from \"./components/PurchaseForm\";\r\nimport Tip from \"../../components/Tip\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  actions as purchaseActions,\r\n  getProduct,\r\n  getQuantity,\r\n  getTipStatus,\r\n  getTotalPrice\r\n} from \"../../redux/modules/purchase\";\r\nimport { getUsername } from \"../../redux/modules/login\";\r\nimport { actions as detailActions } from \"../../redux/modules/detail\";\r\n\r\nclass Purchase extends Component {\r\n  render() {\r\n    const { product, phone, quantity, showTip, totalPrice } = this.props;\r\n    return (\r\n      <div>\r\n        <Header title=\"下单\" onBack={this.handleBack}></Header>\r\n        {product ? (\r\n          <PurchaseForm\r\n            phone={phone}\r\n            quantity={quantity}\r\n            totalPrice={totalPrice}\r\n            onSubmit={this.handleSubmit}\r\n            onSetQuantity={this.handleSetQuantity}\r\n          />\r\n        ) : null}\r\n        {showTip ? (\r\n          <Tip message=\"购买成功!\" onClose={this.handleCloseTip} />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { product } = this.props;\r\n    if (!product) {\r\n      const productId = this.props.match.params.id;\r\n      this.props.detailActions.loadProductDetail(productId);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.purchaseActions.setOrderQuantity(1);\r\n  }\r\n\r\n  handleBack = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  handleCloseTip = () => {\r\n    this.props.purchaseActions.closeTip();\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    const productId = this.props.match.params.id;\r\n    this.props.purchaseActions.submitOrder(productId);\r\n  };\r\n\r\n  handleSetQuantity = (quantity) => {\r\n    this.props.purchaseActions.setOrderQuantity(quantity);\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  const productId = props.match.params.id;\r\n  return {\r\n    product: getProduct(state, productId),\r\n    quantity: getQuantity(state),\r\n    showTip: getTipStatus(state),\r\n    phone: getUsername(state),\r\n    totalPrice: getTotalPrice(state, productId)\r\n  };\r\n};\r\n\r\nconst mapDispatchToPros = (dispatch) => {\r\n  return {\r\n    purchaseActions: bindActionCreators(purchaseActions, dispatch),\r\n    detailActions: bindActionCreators(detailActions, dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToPros)(Purchase);\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\n\r\nclass Header extends Component {\r\n    render() {\r\n        const {grey, title, onBack} = this.props;\r\n        const backgroundColor = grey ? '#f0f0f0' : '#fff';\r\n        return (\r\n            <header className=\"header\" style={{'backgroundColor':backgroundColor}}>\r\n                <div className=\"header__back\" onClick={onBack}>\r\n                    返回\r\n                </div>\r\n                <div className=\"header__title\">\r\n                    {title}\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Header;"],"sourceRoot":""}