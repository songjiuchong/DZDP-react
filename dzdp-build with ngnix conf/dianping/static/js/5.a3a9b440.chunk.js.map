{"version":3,"sources":["containers/ProductDetail/components/ProductOverview/index.js","containers/ProductDetail/components/ShopInfo/index.js","containers/ProductDetail/components/Detail/index.js","containers/ProductDetail/components/Remark/index.js","containers/ProductDetail/components/BuyButton/index.js","containers/ProductDetail/index.js","components/Header/index.js"],"names":["ProductOverview","this","props","data","id","shop","picture","description","currentPrice","oldPrice","className","alt","src","to","Component","ShopInfo","relatedShop","total","name","star","address","phone","style","href","Detail","detail","category","products","remark","cellPadding","cellSpacing","colSpan","map","item","index","quantity","price","Remark","purchaseNotes","validityPeriod","title","content","BuyButton","productId","ProductDetail","handleBack","history","goBack","product","Header","onBack","grey","shopIds","length","detailActions","loadShopById","nearestShop","match","params","loadProductDetail","preProps","connect","state","getProduct","getRelatedShop","dispatch","bindActionCreators","backgroundColor","onClick"],"mappings":"wSAgDeA,E,uKA3CH,IAAD,EAQHC,KAAKC,MAAMC,KANbC,EAFK,EAELA,GACAC,EAHK,EAGLA,KACAC,EAJK,EAILA,QACAC,EALK,EAKLA,YACAC,EANK,EAMLA,aACAC,EAPK,EAOLA,SAEF,OACE,sBAAKC,UAAU,kBAAf,UACE,sBAAKA,UAAU,0BAAf,UACE,qBAAKA,UAAU,gCAAf,SACE,qBAAKC,IAAI,GAAGD,UAAU,uBAAuBE,IAAKN,MAEpD,sBAAKI,UAAU,4BAAf,UACE,qBAAKA,UAAU,yBAAf,SAAyCL,IACzC,qBAAKK,UAAU,2BAAf,SAA2CH,UAG/C,sBAAKG,UAAU,4BAAf,UACE,sBAAMA,UAAU,0BAAhB,kBACA,sBAAMA,UAAU,yBAAhB,SAA0CF,IAC1C,uBAAME,UAAU,8BAAhB,iBAAgDD,KAChD,cAAC,IAAD,CAAMI,GAAE,oBAAeT,GAAMM,UAAU,uBAAvC,yCAIF,qBAAIA,UAAU,0BAAd,UACE,qBAAIA,UAAU,8BAAd,UACE,mBAAGA,UAAU,2BACb,sBAAMA,UAAU,wBAAhB,yCAEF,qBAAIA,UAAU,8BAAd,UACE,mBAAGA,UAAU,2BACb,sBAAMA,UAAU,wBAAhB,yD,GApCkBI,aCkCfC,G,8KAlCD,IAAD,EACgCd,KAAKC,MAA5Bc,EADT,EACGb,KAAmBc,EADtB,EACsBA,MACbC,EAA+BF,EAArCX,KAAYc,EAAyBH,EAAzBG,KAAMC,EAAmBJ,EAAnBI,QAASC,EAAUL,EAAVK,MACnC,OACI,sBAAKX,UAAU,WAAf,UACI,sBAAKA,UAAU,mBAAf,uCACWO,EADX,IAEI,sBAAMP,UAAU,uBAEpB,sBAAKA,UAAU,mBAAf,UACI,sBAAKA,UAAU,uBAAf,UACI,qBAAKA,UAAU,qBAAf,SACKQ,IAEL,sBAAKR,UAAU,yBAAf,UACI,sBAAMA,UAAU,kBAAhB,SACI,mBAAGA,UAAU,uBAAuBY,MAAO,CAAC,MAAS,EAAEH,EAAK,SAEhE,sBAAMT,UAAU,qBAAhB,0BAGR,mBAAGA,UAAU,wBAAwBa,KAAI,gBAAWF,GAApD,SACI,mBAAGX,UAAU,6BAGrB,sBAAKA,UAAU,mBAAf,UACI,mBAAGA,UAAU,2BACZU,Y,GA5BEN,cC2DRU,G,8KA1DH,IAAD,EAKHvB,KAAKC,MAAMC,KALR,IAELsB,OAAUC,EAFL,EAEKA,SAAUC,EAFf,EAEeA,SAAUC,EAFzB,EAEyBA,OAC9BpB,EAHK,EAGLA,aACAC,EAJK,EAILA,SAEF,OACE,sBAAKC,UAAU,SAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,4DACA,mBAAGA,UAAU,0BAEf,uBAAOmB,YAAY,IAAIC,YAAY,IAAIpB,UAAU,gBAAjD,SACE,kCACE,oBAAIA,UAAU,cAAd,SACE,oBAAIqB,QAAQ,IAAIrB,UAAU,mBAA1B,SACGgB,MAGJC,EAASK,KAAI,SAACC,EAAMC,GACnB,OACE,qBAAgBxB,UAAU,cAA1B,UACE,6BAAKuB,EAAKf,OACV,oBAAIR,UAAU,yBAAd,SAAwCuB,EAAKE,WAC7C,oBAAIzB,UAAU,yBAAd,SAAwCuB,EAAKG,UAHtCF,MAOb,qBAAIxB,UAAU,cAAd,UACE,uBACA,qBAAIA,UAAU,oBAAd,qCAEE,uBACA,wBAAQA,UAAU,uBAAlB,mCAEF,qBAAIA,UAAU,oBAAd,UACGD,EADH,SAEE,uBACA,yBAAQC,UAAU,uBAAlB,UACGF,EADH,uBAOR,qBAAKE,UAAU,iBAAf,SAAiCkB,IACjC,sBAAKlB,UAAU,eAAf,UACE,wEACA,sBAAMA,UAAU,iBAAhB,6FAGA,mBAAGA,UAAU,4B,GApDFI,cC4BNuB,G,8KA3BH,IAAD,EACmCpC,KAAKC,MAAMC,KAA7CmC,EADD,EACCA,cAAeC,EADhB,EACgBA,eACvB,OACE,sBAAK7B,UAAU,SAAf,UACE,sBAAKA,UAAU,iBAAf,qCAEE,mBAAGA,UAAU,oBAEf,sBAAKA,UAAU,eAAf,UACE,qBAAIA,UAAU,eAAd,UACE,oBAAIA,UAAU,oBAAd,gCACA,oBAAIA,UAAU,mBAAd,SAAkC6B,OAEnCD,EAAcN,KAAI,SAACC,EAAMC,GACxB,OACE,qBAAgBxB,UAAU,eAA1B,UACE,oBAAIA,UAAU,oBAAd,SAAmCuB,EAAKO,QACxC,oBAAI9B,UAAU,mBAAd,SAAkCuB,EAAKQ,YAFhCP,gB,GAhBFpB,cCYN4B,G,8KAVD,IACCC,EAAa1C,KAAKC,MAAlByC,UACP,OACI,cAAC,IAAD,CAAM9B,GAAE,oBAAe8B,GAAajC,UAAU,YAA9C,0C,GAJYI,c,+BCWlB8B,E,4MAsCJC,WAAa,WACX,EAAK3C,MAAM4C,QAAQC,U,uDAtCX,IAAD,EAC0B9C,KAAKC,MAA9B8C,EADD,EACCA,QAAShC,EADV,EACUA,YACjB,OACE,gCACE,cAACiC,EAAA,EAAD,CAAQT,MAAM,2BAAOU,OAAQjD,KAAK4C,WAAYM,MAAI,IACjDH,GAAW,cAAC,EAAD,CAAiB7C,KAAM6C,IAClChC,GACC,cAAC,EAAD,CAAUb,KAAMa,EAAaC,MAAO+B,EAAQI,QAAQC,SAErDL,GACC,gCACE,cAAC,EAAD,CAAQ7C,KAAM6C,IACd,cAAC,EAAD,CAAQ7C,KAAM6C,IACd,cAAC,EAAD,CAAWL,UAAWK,EAAQ5C,a,0CAOnB,IACX4C,EAAY/C,KAAKC,MAAjB8C,QACR,GAAKA,EAGO/C,KAAKC,MAAMc,aACrBf,KAAKC,MAAMoD,cAAcC,aAAaP,EAAQQ,iBAJlC,CACZ,IAAMb,EAAY1C,KAAKC,MAAMuD,MAAMC,OAAOtD,GAC1CH,KAAKC,MAAMoD,cAAcK,kBAAkBhB,M,yCAM5BiB,IAEZA,EAASZ,SAAW/C,KAAKC,MAAM8C,SAClC/C,KAAKC,MAAMoD,cAAcC,aAAatD,KAAKC,MAAM8C,QAAQQ,iB,GAlCnC1C,aAyDb+C,uBAdS,SAACC,EAAO5D,GAC9B,IAAMyC,EAAYzC,EAAMuD,MAAMC,OAAOtD,GACrC,MAAO,CACL4C,QAASe,YAAWD,EAAOnB,GAC3B3B,YAAagD,YAAeF,EAAOnB,OAIb,SAACsB,GACzB,MAAO,CACLX,cAAeY,YAAmBZ,IAAeW,MAItCJ,CAA4CjB,I,kFCrErDK,G,6KACQ,IAAD,EACyBhD,KAAKC,MAA5BiD,EADF,EACEA,KAAMX,EADR,EACQA,MAAOU,EADf,EACeA,OACdiB,EAAkBhB,EAAO,UAAY,OAC3C,OACI,yBAAQzC,UAAU,SAASY,MAAO,CAAC,gBAAkB6C,GAArD,UACI,qBAAKzD,UAAU,eAAe0D,QAASlB,EAAvC,0BAGA,qBAAKxC,UAAU,gBAAf,SACK8B,W,GAVA1B,cAiBNmC,O","file":"static/js/5.a3a9b440.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass ProductOverview extends Component {\r\n  render() {\r\n    const {\r\n      id,\r\n      shop,\r\n      picture,\r\n      description,\r\n      currentPrice,\r\n      oldPrice,\r\n    } = this.props.data;\r\n    return (\r\n      <div className=\"productOverview\">\r\n        <div className=\"productOverview__header\">\r\n          <div className=\"productOverview__imgContainer\">\r\n            <img alt=\"\" className=\"productOverview__img\" src={picture} />\r\n          </div>\r\n          <div className=\"productOverview__baseInfo\">\r\n            <div className=\"productOverview__title\">{shop}</div>\r\n            <div className=\"productOverview__content\">{description}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"productOverview__purchase\">\r\n          <span className=\"productOverview__symbol\">¥</span>\r\n          <span className=\"productOverview__price\">{currentPrice}</span>\r\n          <span className=\"productOverview__price--old\">¥{oldPrice}</span>\r\n          <Link to={`/purchase/${id}`} className=\"productOverview__btn\">\r\n            立即购买\r\n          </Link>\r\n        </div>\r\n        <ul className=\"productOverview__remark\">\r\n          <li className=\"productOverview__remarkItem\">\r\n            <i className=\"productOverview__sign1\"></i>\r\n            <span className=\"productOverview__desc\">随时可退</span>\r\n          </li>\r\n          <li className=\"productOverview__remarkItem\">\r\n            <i className=\"productOverview__sign2\"></i>\r\n            <span className=\"productOverview__desc\">过期自动退</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductOverview;\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\n\r\nclass ShopInfo extends Component {\r\n    render() {\r\n        const { data: relatedShop, total } = this.props;\r\n        const { shop: name, star, address, phone } = relatedShop;\r\n        return (\r\n            <div className=\"shopInfo\">\r\n                <div className=\"shopInfo__header\">\r\n                    使用商户 ({total})\r\n                    <span className=\"shopInfo__arrow\"></span>\r\n                </div>\r\n                <div className=\"shopInfo__middle\">\r\n                    <div className=\"shopInfo__middleLeft\">\r\n                        <div className=\"shopInfo__shopName\">\r\n                            {name}\r\n                        </div>\r\n                        <div className=\"shopInfo__starsWrapper\">\r\n                            <span className=\"shopInfo__stars\">\r\n                                <i className=\"shopInfo__stars--red\" style={{\"width\": 2*star+\"%\"}}></i>\r\n                            </span>\r\n                            <span className=\"shopInfo__distance\">>100km</span>\r\n                        </div>\r\n                    </div>\r\n                    <a className=\"shopInfo__middleRight\" href={`tel://${phone}`}>\r\n                        <i className=\"shopInfo__phoneIcon\"></i>\r\n                    </a>\r\n                </div>\r\n                <div className=\"shopInfo__bottom\">\r\n                    <i className=\"shopInfo__locationIcon\"></i>\r\n                    {address}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShopInfo;","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass Detail extends Component {\r\n  render() {\r\n    const {\r\n      detail: { category, products, remark },\r\n      currentPrice,\r\n      oldPrice,\r\n    } = this.props.data;\r\n    return (\r\n      <div className=\"detail\">\r\n        <div className=\"detail__header\">\r\n          <span>团购详情</span>\r\n          <i className=\"detail__headerIcon\"></i>\r\n        </div>\r\n        <table cellPadding=\"0\" cellSpacing=\"0\" className=\"detail__table\">\r\n          <tbody>\r\n            <tr className=\"detail__row\">\r\n              <th colSpan=\"3\" className=\"detail__category\">\r\n                {category}\r\n              </th>\r\n            </tr>\r\n            {products.map((item, index) => {\r\n              return (\r\n                <tr key={index} className=\"detail__row\">\r\n                  <td>{item.name}</td>\r\n                  <td className=\"detail__td--alignRight\">{item.quantity}</td>\r\n                  <td className=\"detail__td--alignRight\">{item.price}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n            <tr className=\"detail__row\">\r\n              <td />\r\n              <td className=\"detail__td--price\">\r\n                最高价值\r\n                <br />\r\n                <strong className=\"detail__td--priceNew\">团购价</strong>\r\n              </td>\r\n              <td className=\"detail__td--price\">\r\n                {oldPrice}元\r\n                <br />\r\n                <strong className=\"detail__td--priceNew\">\r\n                  {currentPrice}元\r\n                </strong>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div className=\"detail__remark\">{remark}</div>\r\n        <div className=\"detail__more\">\r\n          <span>更多图文详情</span>\r\n          <span className=\"detail__notice\">\r\n            (建议Wifi环境下打卡,土豪请随意)\r\n          </span>\r\n          <i className=\"detail__arrow\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Detail;\r\n","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass Remark extends Component {\r\n  render() {\r\n    const { purchaseNotes, validityPeriod } = this.props.data;\r\n    return (\r\n      <div className=\"remark\">\r\n        <div className=\"remark__header\">\r\n          购买须知\r\n          <i className=\"remark__icon\"></i>\r\n        </div>\r\n        <div className=\"remark__list\">\r\n          <dl className=\"remark__item\">\r\n            <dt className=\"remark__itemTitle\">有效期</dt>\r\n            <dd className=\"remark__itemDesc\">{validityPeriod}</dd>\r\n          </dl>\r\n          {purchaseNotes.map((item, index) => {\r\n            return (\r\n              <dl key={index} className=\"remark__item\">\r\n                <dt className=\"remark__itemTitle\">{item.title}</dt>\r\n                <dd className=\"remark__itemDesc\">{item.content}</dd>\r\n              </dl>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Remark;\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\nimport {Link} from \"react-router-dom\"\r\n\r\nclass BuyButton extends Component {\r\n    render() {\r\n        const {productId} = this.props;\r\n        return (\r\n            <Link to={`/purchase/${productId}`} className=\"buyButton\">\r\n                立即购买\r\n            </Link>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BuyButton;","import React, { Component } from \"react\";\r\nimport ProductOverview from \"./components/ProductOverview\";\r\nimport ShopInfo from \"./components/ShopInfo\";\r\nimport Detail from \"./components/Detail\";\r\nimport Remark from \"./components/Remark\";\r\nimport BuyButton from \"./components/BuyButton\";\r\nimport Header from \"../../components/Header\";\r\nimport {\r\n  actions as detailActions,\r\n  getProduct,\r\n  getRelatedShop,\r\n} from \"../../redux/modules/detail\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ProductDetail extends Component {\r\n  render() {\r\n    const { product, relatedShop } = this.props;\r\n    return (\r\n      <div>\r\n        <Header title=\"团购详情\" onBack={this.handleBack} grey />\r\n        {product && <ProductOverview data={product} />}\r\n        {relatedShop && (\r\n          <ShopInfo data={relatedShop} total={product.shopIds.length} />\r\n        )}\r\n        {product && (\r\n          <div>\r\n            <Detail data={product} />\r\n            <Remark data={product} />\r\n            <BuyButton productId={product.id} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { product } = this.props;\r\n    if (!product) {\r\n      const productId = this.props.match.params.id;\r\n      this.props.detailActions.loadProductDetail(productId);\r\n    } else if (!this.props.relatedShop) {\r\n      this.props.detailActions.loadShopById(product.nearestShop);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(preProps) {\r\n    //第一次获取到产品详情之后，需要继续获取相关店铺信息\r\n    if (!preProps.product && this.props.product) {\r\n      this.props.detailActions.loadShopById(this.props.product.nearestShop);\r\n    }\r\n  }\r\n\r\n  handleBack = () => {\r\n    this.props.history.goBack();\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  const productId = props.match.params.id;\r\n  return {\r\n    product: getProduct(state, productId),\r\n    relatedShop: getRelatedShop(state, productId),\r\n  };\r\n};\r\n\r\nconst mapDispatchToPros = (dispatch) => {\r\n  return {\r\n    detailActions: bindActionCreators(detailActions, dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToPros)(ProductDetail);\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\n\r\nclass Header extends Component {\r\n    render() {\r\n        const {grey, title, onBack} = this.props;\r\n        const backgroundColor = grey ? '#f0f0f0' : '#fff';\r\n        return (\r\n            <header className=\"header\" style={{'backgroundColor':backgroundColor}}>\r\n                <div className=\"header__back\" onClick={onBack}>\r\n                    返回\r\n                </div>\r\n                <div className=\"header__title\">\r\n                    {title}\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Header;"],"sourceRoot":""}