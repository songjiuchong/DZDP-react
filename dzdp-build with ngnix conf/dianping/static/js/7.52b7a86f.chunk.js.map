{"version":3,"sources":["containers/User/components/OrderItem/index.js","components/Confirm/index.js","containers/User/containers/UserMain/index.js","containers/User/components/UserHeader/index.js","containers/User/index.js"],"names":["OrderItem","handleCommentChange","e","props","onCommentChange","target","value","this","data","title","statusText","orderPicUrl","channel","text","type","commentId","isCommenting","className","src","alt","onClick","onComment","onRemove","renderEditArea","onChange","comment","renderStars","onSubmitComment","onCancelComment","stars","map","item","index","lightClass","onStarsChange","bind","Component","Confirm","content","onCancel","onConfirm","confirmText","cancelText","tabTitles","UserMain","handleClickTab","userActions","setCurrentTab","renderOrderList","commentingOrderId","orderComment","orderStars","handleRemove","id","handleStarsChange","handleComment","handleSubmitComment","handleCancelComment","renderEmpty","renderConfirmDialog","hideDeleteDialog","removeOrder","submitComment","hideCommentArea","orderId","showCommentArea","setStars","setComment","showDeleteDialog","currentTab","deletingOrderId","length","connect","state","getCurrentTab","getDeletingOrderId","getCommentingOrderId","getCurrentOrderComment","getCurrentOrderStars","dispatch","bindActionCreators","UserHeader","onBack","onLogout","User","handleBack","history","push","handleLogout","loginActions","logout","orders","loadOrders","getOrders"],"mappings":"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","file":"static/js/7.52b7a86f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass OrderItem extends Component {\r\n  render() {\r\n    const {\r\n      data: { title, statusText, orderPicUrl, channel, text, type, commentId },\r\n      isCommenting,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"orderItem\">\r\n        <div className=\"orderItem__title\">\r\n          <span>{title}</span>\r\n        </div>\r\n        <div className=\"orderItem__main\">\r\n          <div className=\"orderItem__imgWrapper\">\r\n            <div className=\"orderItem__tag\">{statusText}</div>\r\n            <img className=\"orderItem__img\" src={orderPicUrl} alt=\"\" />\r\n          </div>\r\n          <div className=\"orderItem__content\">\r\n            <div className=\"orderItem__line\">{text[0]}</div>\r\n            <div className=\"orderItem__line\">{text[1]}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"orderItem__bottom\">\r\n          <div className=\"orderItem__type\">{channel}</div>\r\n          <div>\r\n            {type === 1 && !commentId ? (\r\n              <div className=\"orderItem__btn\" onClick={this.props.onComment}>\r\n                评价\r\n              </div>\r\n            ) : null}\r\n            <div className=\"orderItem__btn\" onClick={this.props.onRemove}>\r\n              删除\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {isCommenting ? this.renderEditArea() : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderEditArea() {\r\n    return (\r\n      <div className=\"orderItem__commentContainer\">\r\n        <textarea\r\n          className=\"orderItem__comment\"\r\n          onChange={this.handleCommentChange}\r\n          value={this.props.comment}\r\n        />\r\n        {this.renderStars()}\r\n        <button\r\n          className=\"orderItem__commentBtn\"\r\n          onClick={this.props.onSubmitComment}\r\n        >\r\n          提交\r\n        </button>\r\n        <button\r\n          className=\"orderItem__commentBtn\"\r\n          onClick={this.props.onCancelComment}\r\n        >\r\n          取消\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderStars() {\r\n    const { stars } = this.props;\r\n    return (\r\n      <div>\r\n        {[1, 2, 3, 4, 5].map((item, index) => {\r\n          const lightClass = stars >= item ? \"orderItem__star--light\" : \"\";\r\n          return (\r\n            <span\r\n              key={index}\r\n              className={\"orderItem__star \" + lightClass}\r\n              onClick={this.props.onStarsChange.bind(this, item)}\r\n            >\r\n              ★\r\n            </span>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleCommentChange = (e) => {\r\n    this.props.onCommentChange(e.target.value);\r\n  };\r\n}\r\n\r\nexport default OrderItem;\r\n","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass Confirm extends Component {\r\n  render() {\r\n    const { content, onCancel, onConfirm, confirmText, cancelText } = this.props;\r\n    return (\r\n      <div className=\"confirm\">\r\n        <div className=\"confirm__alert\">\r\n          <div className=\"confirm__content\">{content}</div>\r\n          <div className=\"confirm__btns\">\r\n            <a className=\"confirm__btn\" onClick={onCancel}>\r\n              {cancelText}\r\n            </a>\r\n            <a className=\"confirm__btn\" onClick={onConfirm}>\r\n              {confirmText}\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Confirm;\r\n","import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  actions as userActions,\r\n  getCurrentTab,\r\n  getDeletingOrderId,\r\n  getCurrentOrderComment,\r\n  getCurrentOrderStars,\r\n  getCommentingOrderId,\r\n} from \"../../../../redux/modules/user\";\r\nimport OrderItem from \"../../components/OrderItem\";\r\nimport Confirm from \"../../../../components/Confirm\";\r\nimport \"./style.css\";\r\n\r\nconst tabTitles = [\"全部订单\", \"待付款\", \"可使用\", \"退款/售后\"];\r\n\r\nclass UserMain extends Component {\r\n  render() {\r\n    const { currentTab, data, deletingOrderId } = this.props;\r\n    return (\r\n      <div className=\"userMain\">\r\n        <div className=\"userMain__menu\">\r\n          {tabTitles.map((item, index) => {\r\n            return (\r\n              <div\r\n                key={index}\r\n                className=\"userMain__tab\"\r\n                onClick={this.handleClickTab.bind(this, index)}\r\n              >\r\n                <span\r\n                  className={\r\n                    currentTab === index\r\n                      ? \"userMain__title userMain__title--active\"\r\n                      : \"userMain__title\"\r\n                  }\r\n                >\r\n                  {item}\r\n                </span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"userMain__content\">\r\n          {data && data.length > 0\r\n            ? this.renderOrderList(data)\r\n            : this.renderEmpty()}\r\n        </div>\r\n        {deletingOrderId ? this.renderConfirmDialog() : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleClickTab = (index) => {\r\n    this.props.userActions.setCurrentTab(index);\r\n  };\r\n\r\n  renderOrderList = (data) => {\r\n    const { commentingOrderId, orderComment, orderStars } = this.props;\r\n    return data.map((item) => {\r\n      return (\r\n        <OrderItem\r\n          key={item.id}\r\n          data={item}\r\n          onRemove={this.handleRemove.bind(this, item.id)}\r\n          isCommenting={item.id === commentingOrderId}\r\n          comment={item.id === commentingOrderId ? orderComment : \"\"}\r\n          stars={item.id === commentingOrderId ? orderStars : 0}\r\n          onCommentChange={this.handleCommentChange}\r\n          onStarsChange={this.handleStarsChange}\r\n          onComment={this.handleComment.bind(this,item.id)}\r\n          onSubmitComment={this.handleSubmitComment}\r\n          onCancelComment={this.handleCancelComment}\r\n        />\r\n      );\r\n    });\r\n  };\r\n\r\n  renderEmpty = () => {\r\n    return (\r\n      <div className=\"userMain__empty\">\r\n        <div className=\"userMain__emptyIcon\" />\r\n        <div className=\"userMain__emptyText1\">您还没有相关订单</div>\r\n        <div className=\"userMain__emptyText2\">去逛逛看有哪些想买的</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderConfirmDialog = () => {\r\n    const {\r\n      userActions: { hideDeleteDialog, removeOrder },\r\n    } = this.props;\r\n    return (\r\n      <Confirm\r\n        content=\"确定删除该订单吗?\"\r\n        cancelText=\"取消\"\r\n        confirmText=\"确定\"\r\n        onCancel={hideDeleteDialog}\r\n        onConfirm={removeOrder}\r\n      />\r\n    );\r\n  };\r\n\r\n  handleSubmitComment = () => {\r\n    const {userActions: {submitComment}} = this.props;\r\n    submitComment()\r\n  }\r\n\r\n  handleCancelComment = () => {\r\n    const {userActions: {hideCommentArea}} = this.props;\r\n    hideCommentArea()\r\n  }\r\n\r\n  handleComment = orderId => {\r\n    const {userActions: {showCommentArea}} = this.props\r\n    showCommentArea(orderId)\r\n  }\r\n\r\n  handleStarsChange = stars => {\r\n    const {userActions:{setStars}} = this.props;\r\n    setStars(stars)\r\n  }\r\n\r\n  handleCommentChange = comment => {\r\n    const {userActions: {setComment}} = this.props;\r\n    setComment(comment)\r\n  }\r\n\r\n  handleRemove = (orderId) => {\r\n    this.props.userActions.showDeleteDialog(orderId);\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {\r\n    currentTab: getCurrentTab(state),\r\n    deletingOrderId: getDeletingOrderId(state),\r\n    commentingOrderId: getCommentingOrderId(state),\r\n    orderComment: getCurrentOrderComment(state),\r\n    orderStars: getCurrentOrderStars(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    userActions: bindActionCreators(userActions, dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserMain);\r\n","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass UserHeader extends Component {\r\n  render() {\r\n    const { onBack, onLogout } = this.props;\r\n    return (\r\n      <header className=\"userHeader\">\r\n        <div className=\"userHeader__back\" onClick={onBack}>\r\n          首页\r\n        </div>\r\n        <div className=\"userHeader__list\">\r\n          <span className=\"userHeader__item userHeader__item--selected\">\r\n            订单\r\n          </span>\r\n          <span className=\"userHeader__item\">抵用券</span>\r\n        </div>\r\n        <div className=\"userHeader__right\" onClick={onLogout}>\r\n          注销\r\n        </div>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserHeader;\r\n","import React, { Component } from \"react\";\r\nimport UserMain from \"./containers/UserMain\";\r\nimport UserHeader from \"./components/UserHeader\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {actions as userActions, getOrders, getCurrentTab} from \"../../redux/modules/user\"\r\nimport {actions as loginActions} from \"../../redux/modules/login\"\r\n\r\nclass User extends Component {\r\n  render() {\r\n    const {orders} = this.props\r\n    return (\r\n      <div>\r\n        <UserHeader onBack={this.handleBack} onLogout={this.handleLogout} />\r\n        <UserMain data={orders} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n      this.props.userActions.loadOrders();\r\n  }\r\n\r\n  handleBack = () => {\r\n      this.props.history.push(\"/\");\r\n  };\r\n\r\n  handleLogout = () => {\r\n      this.props.loginActions.logout();\r\n  };\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n    return {\r\n        orders: getOrders(state),\r\n        currentTab: getCurrentTab(state)\r\n    }\r\n}\r\n\r\nconst mapDispatchToPros = (dispatch) => {\r\n    return {\r\n        userActions: bindActionCreators(userActions, dispatch),\r\n        loginActions: bindActionCreators(loginActions, dispatch)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToPros)(User);\r\n"],"sourceRoot":""}