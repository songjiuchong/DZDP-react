{"version":3,"sources":["containers/Search/components/SearchBox/index.js","containers/Search/components/PopularSearch/index.js","containers/Search/components/SearchHistory/index.js","containers/Search/index.js"],"names":["SearchBox","handleClickItem","item","props","onClickItem","handleChange","e","onChange","target","value","handleClear","onClear","handleCancel","onCancel","this","inputText","relatedKeywords","className","placeholder","onClick","length","renderSuggestList","map","bind","keyword","quantity","id","Component","PopularSearch","handleClick","data","index","SearchHistory","Search","handleChangeInput","text","searchActions","setInputText","loadRelatedKeywords","handleClearInput","clearInputText","history","goBack","addHistoryKeyword","loadRelatedShops","push","handleClearHistory","clearHistoryKeywords","popularKeywords","historyKeywords","loadPopularKeywords","connect","state","getRelatedKeywords","getInputText","getPopularKeywords","getHistoryKeywords","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/9.dd59365d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport './style.css';\r\n\r\nclass SearchBox extends Component {\r\n\r\n  render() {\r\n    const {inputText, relatedKeywords} = this.props;\r\n    return (\r\n      <div className=\"searchBox\">\r\n        <div className=\"searchBox__container\">\r\n          <input className=\"searchBox__text\" placeholder=\"请输入关键词\" value = {inputText} onChange={this.handleChange}/>\r\n          <span className=\"searchBox__clear\" onClick={this.handleClear}></span>\r\n          <span className=\"searchBox__cancel\" onClick={this.handleCancel}>取消</span>\r\n        </div>\r\n        {relatedKeywords.length > 0 && this.renderSuggestList(relatedKeywords)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderSuggestList(relatedKeywords) {\r\n    return (\r\n      <ul className=\"searchBox__list\">\r\n          {\r\n              relatedKeywords.map(item => {\r\n                return (\r\n                    <li key={item.id} onClick={this.handleClickItem.bind(this, item)} className=\"searchBox__item\">\r\n                        <span className=\"searchBox__itemKeyword\">\r\n                            {item.keyword}\r\n                        </span>\r\n                        <span className=\"searchBox__itemQuantity\">\r\n                            约{item.quantity}结果\r\n                        </span>\r\n                    </li>\r\n                )\r\n              })\r\n          }\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  handleClickItem = (item) => {\r\n    this.props.onClickItem(item)\r\n  }\r\n\r\n  handleChange = (e) => {\r\n      this.props.onChange(e.target.value)\r\n  }\r\n\r\n  handleClear = () => {\r\n    this.props.onClear();\r\n  }\r\n\r\n  handleCancel = () => {\r\n    this.props.onCancel();\r\n  }\r\n}\r\n\r\nexport default SearchBox;\r\n","import React, { Component } from 'react';\r\nimport './style.css';\r\n\r\nclass PopularSearch extends Component {\r\n    render() {\r\n        const { data } = this.props;\r\n        return (\r\n            <div className=\"popularSearch\">\r\n                {\r\n                    data.map((item, index) => {\r\n                        return (\r\n                            <span key={item.id} onClick={this.handleClick.bind(this, item)} className=\"popularSearch__item\">\r\n                                {item.keyword}\r\n                            </span>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handleClick = (item) => {\r\n        this.props.onClickItem(item);\r\n    }\r\n}\r\n\r\nexport default PopularSearch;","import React, { Component } from \"react\";\r\nimport \"./style.css\";\r\n\r\nclass SearchHistory extends Component {\r\n\r\n  render() {\r\n    const {data} = this.props;\r\n    return (\r\n      <div className=\"searchHistory\">\r\n        <div className=\"searchHistory__header\">搜索记录</div>\r\n        <ul className=\"searchHistory__list\">\r\n          {data.map((item, index) => {\r\n            return (\r\n              <li key={item.id} className=\"searchHistory__item\" onClick={this.handleClick.bind(this, item)}>\r\n                {item.keyword}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n        <div className=\"searchHistory__clear\" onClick={this.handleClear}>\r\n          清除搜索记录\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleClick = (item) => {\r\n    this.props.onClickItem(item)\r\n  }\r\n\r\n  handleClear = () => {\r\n      this.props.onClear()\r\n  };\r\n}\r\n\r\nexport default SearchHistory;\r\n","import React, { Component } from \"react\";\r\nimport SearchBox from \"./components/SearchBox\";\r\nimport PopularSearch from \"./components/PopularSearch\";\r\nimport SearchHistory from \"./components/SearchHistory\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  actions as searchActions,\r\n  getPopularKeywords,\r\n  getRelatedKeywords,\r\n  getInputText,\r\n  getHistoryKeywords,\r\n} from \"../../redux/modules/search\";\r\n\r\nclass Search extends Component {\r\n  render() {\r\n    const {\r\n      inputText,\r\n      popularKeywords,\r\n      relatedKeywords,\r\n      historyKeywords,\r\n    } = this.props;\r\n    return (\r\n      <div>\r\n        <SearchBox\r\n          inputText={inputText}\r\n          relatedKeywords={relatedKeywords}\r\n          onChange={this.handleChangeInput}\r\n          onClear={this.handleClearInput}\r\n          onCancel={this.handleCancel}\r\n          onClickItem={this.handleClickItem}\r\n        />\r\n        <PopularSearch\r\n          data={popularKeywords}\r\n          onClickItem={this.handleClickItem}\r\n        />\r\n        <SearchHistory\r\n          data={historyKeywords}\r\n          onClickItem={this.handleClickItem}\r\n          onClear = {this.handleClearHistory}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { loadPopularKeywords } = this.props.searchActions;\r\n    loadPopularKeywords();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n      const { clearInputText } = this.props.searchActions;\r\n      clearInputText();\r\n  }\r\n\r\n  handleChangeInput = (text) => {\r\n    const { setInputText, loadRelatedKeywords } = this.props.searchActions;\r\n    setInputText(text);\r\n    loadRelatedKeywords(text);\r\n  };\r\n\r\n  handleClearInput = () => {\r\n    const { clearInputText } = this.props.searchActions;\r\n    clearInputText();\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.handleClearInput();\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  handleClickItem = (item) => {\r\n    const { setInputText, addHistoryKeyword, loadRelatedShops } = this.props.searchActions;\r\n    setInputText(item.keyword);\r\n    addHistoryKeyword(item.id);\r\n    loadRelatedShops(item.id);\r\n    this.props.history.push(\"/search_result\")\r\n  };\r\n\r\n  handleClearHistory = () => {\r\n    const { clearHistoryKeywords } = this.props.searchActions;\r\n    clearHistoryKeywords();\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, props) => {\r\n  return {\r\n    relatedKeywords: getRelatedKeywords(state),\r\n    inputText: getInputText(state),\r\n    popularKeywords: getPopularKeywords(state),\r\n    historyKeywords: getHistoryKeywords(state),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    searchActions: bindActionCreators(searchActions, dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\r\n"],"sourceRoot":""}